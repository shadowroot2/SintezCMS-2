const _LANGS_AJAX_ = '/cms/modules/langs/ajax/a/';// Выбор языкаfunction setLanguage(obj){	$.getJSON(_LANGS_AJAX_+'set/'+$(obj).parent().parent().attr('rel'), function(json)	{		if (json.status == 'ok')		{			$('#lang_table .setlang').attr('title', 'Сделать языком по умолчанию').find('img').attr('src', '/cms/images/star_unset.png');			$(obj).attr('title', 'Язык по умолчанию').find('img').attr('src', '/cms/images/star_set.png');		}		else error_alert(json.msg);	});	return false;}// Включение/Выключение языкаfunction switchLanguage(obj){	$.getJSON(_LANGS_AJAX_+'switch/'+$(obj).parent().parent().attr('rel'), function(json)	{		if (json.status == 'ok')		{			$(obj).attr('title', json.active_text).find('img').attr('src', '/cms/images/'+json.active+'.png');			if (json.active == 'on') $(obj).parent().parent().removeClass('disabled');			else $(obj).parent().parent().addClass('disabled');		}		else error_alert(json.msg);	});	return false;}// Удаление языкаfunction removeLanguage(obj){	if (confirm('Удалить?'))	{		var obj = $(obj).parent().parent();		$.getJSON(_LANGS_AJAX_+'remove/'+$(obj).attr('rel'), function(json)		{			if (json.status == 'ok') $(obj).fadeOut('normal', function(){ $(this).remove(); });			else error_alert(json.msg);		});	}	return false;}// DOM$(function(){	// Добавление языка	$('#lang_add').submit(function()	{		$('#infobox').hide().removeClass('errorbox').empty();		$('#lang_add_btn').prop('disabled', true);		if ($('#lang_name').val().length < 3)		{			$('#infobox').addClass('errorbox').text('Короткое название языка').fadeIn('fast');			$('#lang_name').focus();		}		else if ($('#lang_code').val().length < 2)		{			$('#infobox').addClass('errorbox').text('Введите 2-х символьный код языка').fadeIn('fast');			$('#lang_code').focus();		}		else		{			$.post(_LANGS_AJAX_+'add',			{				name 	: $('#lang_name').val(),				code	: $('#lang_code').val()			},			function(json)			{				if (json.status == 'ok') self.location = '/cms/modules/langs/';				else $('#infobox').addClass('errorbox').html(json.msg).fadeIn('fast');			}, 'json');		}		$('#lang_add_btn').prop('disabled', false);		return false;	});	// Редактирование языка	$('#lang_edit').submit(function()	{		$('#infobox').hide().removeClass('errorbox').empty();		$('#lang_edit_btn').prop('disabled', true);		if ($('#lang_name').val().val().length < 3)		{			$('#infobox').addClass('errorbox').text('Короткое название языка').fadeIn('fast');			$('#lang_name').focus();		}		else if ($('#lang_code').val().length < 2)		{			$('#infobox').addClass('errorbox').text('Введите 2-х символьный код языка').fadeIn('fast');			$('#lang_code').focus();		}		else		{			$.post('/cms/modules/langs/ajax/a/edit',			{				id		: $('#lang_id').val(),				name 	: $('#lang_name').val(),				code	: $('#lang_code').val()			},			function(json)			{				if (json.status == 'ok') self.location = '/cms/modules/langs/';				else $('#infobox').addClass('errorbox').html(json.msg).fadeIn('fast');			}, 'json');		}		$('#lang_edit_btn').prop('disabled', false);		return false;	});	// Ввод латинских букв	$('#lang_code').keyup(function()	{		latInput($(this));	});});